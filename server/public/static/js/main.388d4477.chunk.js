(this["webpackJsonpnode-react-mongo-auth-client"]=this["webpackJsonpnode-react-mongo-auth-client"]||[]).push([[0],{101:function(e,s,r){e.exports={singupLinks:"SigninForm_singupLinks__3xUFY",authHeader:"SigninForm_authHeader__1dABY"}},103:function(e,s,r){e.exports={singupLinks:"SignupForm_singupLinks__Qhf_n",authHeader:"SignupForm_authHeader__34fvh"}},104:function(e,s,r){e.exports={singupLinks:"RestorePasswordForm_singupLinks__3meIX",authHeader:"RestorePasswordForm_authHeader__B1wv6"}},137:function(e,s,r){e.exports={signupFormWrapper:"container_signupFormWrapper__3IdG7",authHeader:"container_authHeader__1Cjqk"}},138:function(e,s,r){e.exports={restorePasswordWrapper:"container_restorePasswordWrapper__brtQi",authHeader:"container_authHeader__3kFas"}},194:function(e,s,r){e.exports={signinFormWrapper:"container_signinFormWrapper__3MD7z"}},198:function(e,s,r){e.exports={confirmRestorePasswordWrapper:"container_confirmRestorePasswordWrapper__2xpCd"}},199:function(e,s,r){e.exports={notFoundWrapper:"container_notFoundWrapper__23mVH"}},200:function(e,s,r){e.exports={usersList:"container_usersList__21A9d"}},203:function(e,s,r){e.exports={roomsList:"container_roomsList__2TF5O"}},205:function(e,s,r){e.exports={authLayout:"Auth_authLayout__1ZRI7"}},206:function(e,s,r){e.exports={logo:"Header_logo__1Pnae"}},207:function(e,s,r){e.exports={cabinetContent:"Cabinet_cabinetContent__2QlFi"}},425:function(e,s,r){},426:function(e,s,r){"use strict";r.r(s);var t=r(0),a=r(5),i=r.n(a),n=r(22),o=r(47),c=r(184),d=r.n(c);var l={...{LOGGER_ENABLE:!1,API_BASE_URL:"production/api/"}},u=r(185);const h=()=>{const e=localStorage.getItem("authUserData");return e?JSON.parse(e):null},j=e=>{localStorage.setItem("authUserData",JSON.stringify(e))},p=()=>{localStorage.removeItem("authUserData")},g=e=>{try{const{exp:s}=Object(u.a)(e);return!((new Date).getTime()/1e3>s)}catch(s){return!1}},m=d.a.create({baseURL:l.API_BASE_URL,timeout:2e4}),b=(e,s,r)=>new Promise(((t,a)=>{m[e](s,r).then((e=>{t(e.data)})).catch((e=>{a(e)}))})),O="SIGNIN_REQUEST_PROCESS",x="SIGNIN_REQUEST_ERROR",S="SIGNIN_SUCCESS",E="LOGOUT",y=e=>({type:S,data:e}),R=()=>({type:E}),_={isLoading:!1,isError:!1,errorMessage:"",isAuth:!1,accessToken:"",refreshToken:"",user:{id:"",name:"",email:""}};var f=r(431),L=r(432),v=r(6),w=r(36),k=r(101),M=r.n(k),T=r(19),C=r(2);const U=f.a.create({name:"signinForm"})((e=>{const{getFieldDecorator:s}=e.form;return Object(C.jsxs)(f.a,{onSubmit:s=>{s.preventDefault(),e.form.validateFieldsAndScroll(((s,r)=>{s||e.onSubmit(r)}))},className:M.a.signinForm,children:[Object(C.jsx)("h1",{className:M.a.authHeader,children:"Sign in"}),Object(C.jsx)(f.a.Item,{children:s("email",{rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"The input is not valid E-mail!"}]})(Object(C.jsx)(L.a,{prefix:Object(C.jsx)(v.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"}))}),Object(C.jsx)(f.a.Item,{...e.isError&&{help:e.errorMessage,validateStatus:"error"},children:s("password",{rules:[{required:!0,message:"Please input your password!"}]})(Object(C.jsx)(L.a,{prefix:Object(C.jsx)(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))}),Object(C.jsxs)(f.a.Item,{children:[Object(C.jsx)(w.a,{type:"primary",loading:e.isLoading,style:{width:"100%"},htmlType:"submit",children:"Sign in"}),Object(C.jsxs)("div",{className:M.a.singupLinks,children:[Object(C.jsx)(T.a,{to:"/signup",children:"Create accaunt"})," or"," ",Object(C.jsx)(T.a,{to:"/restore-password",children:"Forgot password"})]})]})]})}));var A=r(194),P=r.n(A),I=r(25);const F=Object(n.g)(Object(I.b)((e=>({isLoading:e.auth.signin.isLoading,isAuth:e.auth.signin.isAuth,isError:e.auth.signin.isError,errorMessage:e.auth.signin.errorMessage})),{signinRequest:e=>async s=>{try{s({type:O});const r=await b("post","auth/signin",e);j(r),s(y(r))}catch(r){s((e=>({type:x,error:e}))(r.response?r.response.data:r))}}})((e=>(Object(t.useEffect)((()=>{e.isAuth&&e.history.push("/room")})),Object(C.jsx)("div",{className:P.a.signinFormWrapper,children:Object(C.jsx)(U,{onSubmit:e.signinRequest,isLoading:e.isLoading,isError:e.isError,errorMessage:e.errorMessage})}))))),N="SIGNUP_REQUEST_PROCESS",D="SIGNUP_REQUEST_ERROR",q="SIGNUP_REQUEST_SUCCESS",Q={isSuccess:!1,isLoading:!1,isError:!1,errorMessage:""};var H=r(103),W=r.n(H);const G=f.a.create({name:"signinForm"})((e=>{const{getFieldDecorator:s}=e.form;return Object(C.jsxs)(f.a,{onSubmit:s=>{s.preventDefault(),e.form.validateFieldsAndScroll(((s,r)=>{s||e.onSubmit(r)}))},className:W.a.signupForm,children:[Object(C.jsx)("h1",{className:W.a.authHeader,children:"Create account"}),Object(C.jsx)(f.a.Item,{children:s("name",{rules:[{required:!0,message:"Please input your name!"},{min:2,message:"Min length name 2 symbols!"},{max:30,message:"Max length name 30 symbols!"}]})(Object(C.jsx)(L.a,{prefix:Object(C.jsx)(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name"}))}),Object(C.jsx)(f.a.Item,{...e.isError&&{help:e.errorMessage,validateStatus:"error"},children:s("email",{rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"The input is not valid E-mail!"}]})(Object(C.jsx)(L.a,{prefix:Object(C.jsx)(v.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"}))}),Object(C.jsxs)(f.a.Item,{children:[Object(C.jsx)(w.a,{loading:e.isLoading,type:"primary",style:{width:"100%"},htmlType:"submit",children:"Sing up"}),Object(C.jsxs)("div",{className:W.a.singupLinks,children:[Object(C.jsx)(T.a,{to:"/",children:"Sign in"})," or"," ",Object(C.jsx)(T.a,{to:"/restore-password",children:"Forgot password"})]})]})]})}));var B=r(137),z=r.n(B);const J=Object(n.g)(Object(I.b)((e=>({isLoading:e.auth.signup.isLoading,isAuth:e.auth.signin.isAuth,isError:e.auth.signup.isError,isSuccess:e.auth.signup.isSuccess,errorMessage:e.auth.signup.errorMessage})),{signupRequest:e=>async s=>{try{s({type:N});s((e=>({type:q,data:e}))(await b("post","auth/signup",e)))}catch(r){s((e=>({type:D,error:e}))(r.response?r.response.data:r))}}})((e=>(Object(t.useEffect)((()=>{e.isAuth&&e.history.push("/home")})),Object(C.jsx)("div",{className:z.a.signupFormWrapper,children:e.isSuccess?Object(C.jsxs)("div",{className:z.a.authHeader,children:[Object(C.jsx)("h1",{children:"Success"}),Object(C.jsx)("p",{children:"A password is sent to your email address."}),Object(C.jsxs)("p",{children:["Go to ",Object(C.jsx)(T.a,{to:"/",children:"Sign in"})]})]}):Object(C.jsx)(G,{onSubmit:e.signupRequest,isLoading:e.isLoading,isError:e.isError,errorMessage:e.errorMessage})}))))),K="RESTORE_REQUEST_PROCESS",Y="RESTORE_REQUEST_ERROR",V="RESTORE_SUCCESS",X={isSuccess:!1,isLoading:!1,isError:!1,errorMessage:""};var Z=r(104),$=r.n(Z);const ee=f.a.create({name:"signinForm"})((e=>{const{getFieldDecorator:s}=e.form;return Object(C.jsxs)(f.a,{onSubmit:s=>{s.preventDefault(),e.form.validateFieldsAndScroll(((s,r)=>{s||e.onSubmit(r)}))},className:$.a.restorePassword,children:[Object(C.jsx)("h1",{className:$.a.authHeader,children:"Restore password"}),Object(C.jsx)(f.a.Item,{...e.isError&&{help:e.errorMessage,validateStatus:"error"},children:s("email",{rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"The input is not valid E-mail!"}]})(Object(C.jsx)(L.a,{prefix:Object(C.jsx)(v.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"}))}),Object(C.jsxs)(f.a.Item,{children:[Object(C.jsx)(w.a,{loading:e.isLoading,type:"primary",style:{width:"100%"},htmlType:"submit",children:"Restore"}),Object(C.jsxs)("div",{className:$.a.singupLinks,children:[Object(C.jsx)(T.a,{to:"/",children:"Sign in"})," or"," ",Object(C.jsx)(T.a,{to:"/signup",children:"Create accaunt"})]})]})]})}));var se=r(138),re=r.n(se);const te=Object(n.g)(Object(I.b)((e=>({isLoading:e.auth.restorePassword.isLoading,isAuth:e.auth.signin.isAuth,isError:e.auth.restorePassword.isError,isSuccess:e.auth.restorePassword.isSuccess,errorMessage:e.auth.restorePassword.errorMessage})),{restorePasswordRequest:e=>async s=>{try{s({type:K});s((e=>({type:V,data:e}))(await b("post","auth/restore-password",e)))}catch(r){s((e=>({type:Y,error:e}))(r.response?r.response.data:r))}}})((e=>(Object(t.useEffect)((()=>{e.isAuth&&e.history.push("/home")})),Object(C.jsx)("div",{className:re.a.restorePasswordWrapper,children:e.isSuccess?Object(C.jsxs)("div",{className:re.a.authHeader,children:[Object(C.jsx)("h1",{children:"Success"}),Object(C.jsx)("p",{children:"Link for restore password is sent to your email address."}),Object(C.jsxs)("p",{children:["Go to ",Object(C.jsx)(T.a,{to:"/",children:"Sign in"})]})]}):Object(C.jsx)(ee,{onSubmit:e.restorePasswordRequest,isLoading:e.isLoading,isError:e.isError,errorMessage:e.errorMessage})}))))),ae="CONFIRM_RESTORE_REQUEST_PROCESS",ie="CONFIRM_RESTORE_REQUEST_ERROR",ne="CONFIRM_RESTORE_SUCCESS",oe={isSuccess:!1,isLoading:!1,isError:!1,errorMessage:""};var ce=r(196);const de=e=>{let{children:s,isLoading:r}=e;return r?Object(C.jsx)(ce.a,{size:"large"}):s};var le=r(198),ue=r.n(le);const he=Object(n.g)(Object(I.b)((e=>({isLoading:e.auth.confirmRestorePassword.isLoading,isAuth:e.auth.signin.isAuth,isError:e.auth.confirmRestorePassword.isError,isSuccess:e.auth.confirmRestorePassword.isSuccess,errorMessage:e.auth.confirmRestorePassword.errorMessage})),{confirmRestorePasswordRequest:e=>async s=>{try{s({type:ae});s((e=>({type:ne,data:e}))(await b("post","auth/confirm-restore-password",{token:e})))}catch(r){s((e=>({type:ie,error:e}))(r.response?r.response.data:r))}}})((e=>(Object(t.useEffect)((()=>{e.isAuth&&e.history.push("/home")})),Object(t.useEffect)((()=>{const s=e.match.params.token;s&&e.confirmRestorePasswordRequest(s)}),[]),Object(C.jsx)("div",{className:ue.a.confirmRestorePasswordWrapper,children:Object(C.jsx)(de,{isLoading:e.isLoading,children:e.isSuccess?Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Success"}),Object(C.jsx)("p",{children:"Password has changed."}),Object(C.jsxs)("p",{children:["Go to ",Object(C.jsx)(T.a,{to:"/",children:"Sign in"})]})]}):Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Error"}),Object(C.jsx)("p",{children:e.errorMessage})]})})}))))),je=Object(o.b)({signin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case O:return{...e,isError:!1,errorMessage:"",isLoading:!0};case x:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case S:return{...e,isLoading:!1,isAuth:!0,user:s.data.user,accessToken:s.data.accessToken,refreshToken:s.data.refreshToken};case E:return{...e,isAuth:!1};default:return e}},signup:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case N:return{...e,isError:!1,errorMessage:"",isLoading:!0};case D:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case q:return{...e,isSuccess:!0,isLoading:!1};default:return e}},restorePassword:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case K:return{...e,isError:!1,errorMessage:"",isLoading:!0};case Y:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case V:return{...e,isSuccess:!0,isLoading:!1};default:return e}},confirmRestorePassword:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case ae:return{...e,isError:!1,errorMessage:"",isLoading:!0};case ie:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case ne:return{isSuccess:!0,isLoading:!1};default:return e}}}),pe=[{path:"/",component:F,isAuth:!1,exact:!0},{path:"/signup",component:J,isAuth:!1,exact:!0},{path:"/restore-password",component:te,isAuth:!1,exact:!0},{path:"/confirm-restore-password/:token",component:he,isAuth:!1,exact:!0}];var ge=r(199),me=r.n(ge);const be={component:()=>Object(C.jsxs)("div",{className:me.a.notFoundWrapper,children:[Object(C.jsx)("h1",{children:"404"}),Object(C.jsx)("h2",{children:"Not Found Page"}),Object(C.jsxs)("p",{children:["Go to ",Object(C.jsx)(T.a,{to:"/",children:"Main Page"})]})]}),isAuth:!1,exact:!0},Oe="USERS_REQUEST_PROCESS",xe="USERS_REQUEST_ERROR",Se="USERS_REQUEST_SUCCESS",Ee="USERDEL_REQUEST_ERROR",ye="USERDEL_REQUEST_SUCCESS",Re={data:[],isLoading:!1,isError:!1,errorMessage:""};var _e=r(430),fe=r(200),Le=r.n(fe);const ve=Object(n.g)(Object(I.b)((e=>({isLoading:e.cabinet.users.isLoading,users:e.cabinet.users.data})),{usersFetchRequest:()=>async e=>{try{e({type:Oe});e((e=>({type:Se,data:e}))(await b("get","users")))}catch(s){e((e=>({type:xe,error:e}))(s.response?s.response.data:s))}},userDelRequest:e=>async s=>{try{s((e=>({type:ye,data:e}))(await b("post","user/del",{id:e})))}catch(r){s((e=>({type:Ee,error:e}))(r.response?r.response.data:r))}}})((e=>{Object(t.useEffect)((()=>{e.usersFetchRequest()}),[]);const s=[{title:"ID",dataIndex:"_id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{title:"Delete",key:"delete",render:s=>Object(C.jsx)(w.a,{type:"primary",onClick:()=>{return r=s._id,void e.userDelRequest(r);var r},children:"Delete"})}];return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Users"}),Object(C.jsx)("div",{className:Le.a.usersList,children:Object(C.jsx)(de,{isLoading:e.isLoading,children:Object(C.jsx)(_e.a,{columns:s,dataSource:e.users,rowKey:"_id"})})})]})}))),we="ROOMS_REQUEST_PROCESS",ke="ROOMS_REQUEST_ERROR",Me="ROOMS_REQUEST_SUCCESS",Te="ROOMADD_REQUEST_ERROR",Ce="ROOMADD_REQUEST_SUCCESS",Ue="ROOMDEL_REQUEST_ERROR",Ae="ROOMDEL_REQUEST_SUCCESS",Pe={data:[],isSuccess:!1,isLoading:!1,isError:!1,errorMessage:""};var Ie=r(427),Fe=r(428),Ne=r(433),De=r(203),qe=r.n(De);const Qe=Object(n.g)(Object(I.b)((e=>({isLoading:e.cabinet.rooms.isLoading,rooms:e.cabinet.rooms.data,user:e.auth.signin.user})),{roomsFetchRequest:()=>async e=>{try{e({type:we});e((e=>({type:Me,data:e}))(await b("get","rooms")))}catch(s){e((e=>({type:ke,error:e}))(s.response?s.response.data:s))}},roomAddRequest:e=>async s=>{try{s((e=>({type:Ce,data:e}))(await b("post","room/add",{title:e})))}catch(r){s((e=>({type:Te,error:e}))(r.response?r.response.data:r))}},roomDelRequest:e=>async s=>{try{s((e=>({type:Ae,data:e}))(await b("post","room/del",{id:e})))}catch(r){s((e=>({type:Ue,error:e}))(r.response?r.response.data:r))}}})((e=>{const[s,r]=Object(t.useState)(!1),[a,i]=Object(t.useState)();Object(t.useEffect)((()=>{e.roomsFetchRequest()}),[]);const n=(s,r)=>{window.open("https://localhost:9001?rid="+s+"&open=true&username="+e.user.name+"&title="+r,"_blank")},o=s=>{e.roomDelRequest(s)},c=[{title:"ID",dataIndex:"_id",key:"id"},{title:"Title",dataIndex:"title",key:"title"},{title:"State",dataIndex:"state",key:"state"},{title:"Create",key:"create",render:s=>1===e.user.role?Object(C.jsx)(w.a,{type:"primary",onClick:()=>n(s._id,s.title),children:"Create"}):Object(C.jsx)(w.a,{type:"primary",disabled:e.user.id!==s.creator,onClick:()=>n(s._id),children:"Create"})},{title:"Invite",key:"invite",render:s=>Object(C.jsx)(w.a,{type:"primary",onClick:()=>{return r=s._id,void window.open("https://localhost:9001?rid="+r+"&open=false&username="+e.user.name,"_blank");var r},children:"Invite"})},{title:"Delete",key:"delete",render:s=>1===e.user.role?Object(C.jsx)(w.a,{type:"primary",onClick:()=>o(s._id),children:" Delete"}):Object(C.jsx)(w.a,{type:"primary",disabled:e.user.id!==s.creator,onClick:()=>o(s._id),children:" Delete"})}];return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:Object(C.jsxs)(Ie.a,{type:"flex",justify:"space-between",children:[Object(C.jsx)(Fe.a,{span:4,children:Object(C.jsx)("h1",{children:"Rooms"})}),Object(C.jsx)(Fe.a,{span:4}),Object(C.jsx)(Fe.a,{span:4}),Object(C.jsx)(Fe.a,{span:4,children:Object(C.jsx)(w.a,{onClick:()=>{r(!0)},type:"primary",children:"Open New Room"})})]})}),Object(C.jsx)("div",{className:qe.a.roomsList,children:Object(C.jsx)(de,{isLoading:e.isLoading,children:Object(C.jsx)(_e.a,{columns:c,dataSource:e.rooms,rowKey:"_id"})})}),Object(C.jsxs)(Ne.a,{title:"New Room",visible:s,onOk:s=>{e.roomAddRequest(a),i(null),r(!1)},onCancel:e=>{i(null),r(!1)},children:[Object(C.jsx)("p",{children:"Please input the title"}),Object(C.jsx)(L.a,{value:a,onChange:e=>{i(e.currentTarget.value)}})]})]})}))),He=Object(o.b)({users:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case Oe:return{...e,isError:!1,errorMessage:"",isLoading:!0};case xe:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case Se:return{...e,data:s.data,isLoading:!1};case Ee:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case ye:return{...e,data:[...e.data.filter((e=>e._id!==s.data.id))],isLoading:!1};default:return e}},rooms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case we:return{...e,isError:!1,errorMessage:"",isLoading:!0};case ke:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case Me:return{...e,data:s.data,isLoading:!1};case Te:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case Ce:return{...e,data:[...e.data,s.data.newRoom],isSuccess:!0,isLoading:!1};case Ue:return{...e,isLoading:!1,isError:!0,errorMessage:s.error.message};case Ae:return{...e,data:[...e.data.filter((e=>e._id!==s.data.id))],isLoading:!1};default:return e}}}),We=[...pe,...[{path:"/room",component:Qe,isAuth:!0,exact:!0},{path:"/users",component:ve,isAuth:!0,exact:!0}],be],Ge=Object(I.b)((e=>({isAuth:e.auth.signin.isAuth})))((e=>{let{component:s,...r}=e;return Object(C.jsx)(n.b,{...r,render:e=>r.isAuth?Object(C.jsx)(s,{...e}):Object(C.jsx)(n.a,{to:"/"})})}));var Be=r(205),ze=r.n(Be);const Je=e=>{let{children:s}=e;return Object(C.jsx)("div",{className:ze.a.authLayout,children:Object(C.jsx)(Ie.a,{children:Object(C.jsx)(Fe.a,{xs:{span:14,offset:5},sm:{span:12,offset:6},md:{span:10,offset:7},lg:{span:8,offset:8},xl:{span:6,offset:9},children:s})})})};var Ke=r(429),Ye=r(140);const{Sider:Ve}=Ke.a,Xe=e=>Object(C.jsx)(Ve,{width:200,style:{background:"#fff"},children:Object(C.jsx)(Ye.a,{mode:"inline",defaultSelectedKeys:["0"],style:{height:"100%",borderRight:0},children:e.menuList.map(((s,r)=>0===s.role||1===e.role?Object(C.jsx)(Ye.a.Item,{children:Object(C.jsxs)(T.a,{to:s.path,children:[Object(C.jsx)(v.a,{type:s.icon}),Object(C.jsx)("span",{children:s.label})]})},r):""))})});var Ze=r(206),$e=r.n(Ze);const{SubMenu:es}=Ye.a,{Header:ss}=Ke.a,rs=e=>{let{user:s,logout:r}=e;return Object(C.jsxs)(ss,{style:{padding:"0 24px"},children:[Object(C.jsx)("div",{className:$e.a.logo}),Object(C.jsx)(Ye.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"},children:Object(C.jsx)(es,{style:{float:"right"},title:Object(C.jsxs)("span",{children:[Object(C.jsx)(v.a,{type:"user"}),s.name," (",s.email,")"]}),children:Object(C.jsx)(Ye.a.Item,{onClick:()=>r(),children:"Logout"},"1")},"username")})]})},{Footer:ts}=Ke.a,as=e=>Object(C.jsx)(ts,{});var is=r(207),ns=r.n(is);const{Content:os}=Ke.a,cs=e=>{let{children:s,menuList:r,user:t,logout:a}=e;return Object(C.jsxs)(Ke.a,{style:{minHeight:"100vh"},children:[Object(C.jsx)(rs,{user:t,logout:a}),Object(C.jsxs)(Ke.a,{children:[Object(C.jsx)(Xe,{menuList:r,role:t.role}),Object(C.jsxs)(Ke.a,{style:{padding:"0 24px 24px"},children:[Object(C.jsx)(os,{className:ns.a.cabinetContent,style:{background:"#fff",padding:24,margin:"24px 0 0",minHeight:300},children:s}),Object(C.jsx)(as,{})]})]})]})},ds=[{label:"Room",path:"/room",role:0,icon:"appstore-o"},{label:"Users",path:"/users",role:1,icon:"user"}],ls=Object(I.b)((e=>({isAuth:e.auth.signin.isAuth,user:e.auth.signin.user})),{logoutHandler:()=>e=>{p(),e(R())}})((e=>e.isAuth?Object(C.jsx)(cs,{menuList:ds,user:e.user,logout:e.logoutHandler,children:e.children}):Object(C.jsx)(Je,{children:e.children})));var us=r(27);const hs=Object(us.a)();r(424);var js=r(208);const ps=Object(o.b)({auth:je,cabinet:He}),gs=[js.a],ms=Object(o.c)(ps,Object(o.a)(...gs)),bs=h();var Os,xs;bs&&ms.dispatch(y(bs)),Os=ms,xs=R,m.interceptors.request.use((e=>{const s=h();return s?e.headers.Authorization="Bearer ".concat(s.accessToken):delete e.headers.Authorization,e})),m.interceptors.response.use(null,(async e=>{const s=e.config;if(401===e.response.status&&!s._retry){s._retry=!0;const e=h();if(e){const t=e.refreshToken,a=e.accessToken;if(g(t)||(Os.dispatch(xs()),p()),!g(a))try{const r=await m.post("auth/refresh-tokens",{refreshToken:t});return j({accessToken:r.data.accessToken,refreshToken:r.data.refreshToken,user:e.user}),m(s)}catch(r){Os.dispatch(xs()),p(),console.log("Refresh token error: "+r.message)}}}return Promise.reject(e)}));var Ss=()=>Object(C.jsx)(I.a,{store:ms,children:Object(C.jsx)(n.c,{history:hs,children:Object(C.jsx)(ls,{children:Object(C.jsx)(n.d,{children:We.map(((e,s)=>e.isAuth?Object(C.jsx)(Ge,{path:e.path,component:e.component,exact:e.exact},s):Object(C.jsx)(n.b,{path:e.path,component:e.component,exact:e.exact},s)))})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(425);i.a.render(Object(C.jsx)(Ss,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[426,1,2]]]);
//# sourceMappingURL=main.388d4477.chunk.js.map